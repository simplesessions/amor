var Amortizer;Amortizer=function(){function t(t,n,a,e){this.years=t,this.loanAmount=n,this.interest=a,this.startDate=e,this.numPayments=12*this.years,this.monthlyPayment=this.calculateMonthlyPayment(),this.totalPayment=this.monthlyPayment*this.numPayments,this.totalInterest=this.totalPayment-this.loanAmount}return t.prototype.calculateMonthlyPayment=function(){var t;return t=this.interest/12,this.loanAmount*t*Math.pow(1+t,this.numPayments)/(Math.pow(1+t,this.numPayments)-1)},t.prototype.paymentForBalance=function(t){var n;return n=this.interest/12*t,{interestPmt:n,principalPmt:this.monthlyPayment-n,balance:t-(this.monthlyPayment-this.interest/12*t)}},t.$=function(t){return accounting.formatMoney(Math.round(100*t)/100)},t.emptyRow=function(){return{year:"undefined",interestPmt:0,principalPmt:0,balance:0}},t.prototype.buildTable=function(){var n,a,e,r,i,s,m,o;for(e="",a=this.startDate,r=12*this.years,n=this.loanAmount,m=t.emptyRow(),m.year=this.startDate.format("YYYY"),i=o=0;r>=0?r>o:o>r;i=r>=0?++o:--o)s=this.paymentForBalance(n),e+="<tr>",e+="<td>"+a.format("MMM YYYY")+"</td>",e+="<td>"+t.$(s.interestPmt)+"</td>",e+="<td>"+t.$(s.principalPmt)+"</td>",e+="<td>"+t.$(s.balance)+"</td>",e+="</tr>",m.interestPmt+=s.interestPmt,m.principalPmt+=s.principalPmt,m.balance+=s.balance,a=a.add(1,"months"),a.format("YYYY")!==m.year&&(e+='<tr class="year-summary">',e+="<th>"+m.year+"</th>",e+="<th>"+t.$(m.interestPmt)+"</th>",e+="<th>"+t.$(m.principalPmt)+"</th>",e+="<th>"+t.$(s.balance)+"</th>",e+="</tr>"),m=t.emptyRow(),m.year=a.format("YYYY"),n=s.balance;return e},t}();
//# sourceMappingURL=./amortizer.js.map