var Amortizer;Amortizer=function(){function t(t,n,r){this.years=t,this.loanAmount=n,this.interest=r}return t.prototype.monthlyPayment=function(){var t,n;return n=12*this.years,t=this.interest/12,this.loanAmount*t*Math.pow(1+t,n)/(Math.pow(1+t,n)-1)},t.prototype.paymentForBalance=function(t,n){var r;return r=this.interest/12*n,{interestPmt:r,principalPmt:t-r,balance:n-(t-this.interest/12*n)}},t.$=function(n){return accounting.formatMoney(t.round(n))},t.round=function(t){return Math.round(100*t)/100},t.emptyRow=function(){return{year:"undefined",interestPmt:0,principalPmt:0,balance:0}},t.prototype.buildTable=function(n){var r,e,a,i,o,m,s,c,h;for(a="",e=n,o=12*this.years,r=this.loanAmount,i=this.monthlyPayment(),c=t.emptyRow(),c.year=n.format("YYYY"),m=h=0;o>=0?o>h:h>o;m=o>=0?++h:--h)s=this.paymentForBalance(i,r),a+="<tr>",a+="<td>"+e.format("MMM YYYY")+"</td>",a+="<td>"+t.$(s.interestPmt)+"</td>",a+="<td>"+t.$(s.principalPmt)+"</td>",a+="<td>"+t.$(s.balance)+"</td>",a+="</tr>",c.interestPmt+=s.interestPmt,c.principalPmt+=s.principalPmt,c.balance+=s.balance,e=e.add(1,"months"),e.format("YYYY")!==c.year&&(a+='<tr class="year-summary">',a+="<th>"+c.year+"</th>",a+="<th>"+t.$(c.interestPmt)+"</th>",a+="<th>"+t.$(c.principalPmt)+"</th>",a+="<th>"+t.$(s.balance)+"</th>",a+="</tr>"),c=t.emptyRow(),c.year=e.format("YYYY"),r=s.balance;return a},t}();
//# sourceMappingURL=./amortizer.js.map