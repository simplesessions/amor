var Amortizer;Amortizer=function(){function t(t,a,n,e){this.years=t,this.loanAmount=a,this.interest=n,this.startDate=e,this.monthlyPayment=this.calculateMonthlyPayment()}return t.prototype.calculateMonthlyPayment=function(){var t,a;return a=12*this.years,t=this.interest/12,this.loanAmount*t*Math.pow(1+t,a)/(Math.pow(1+t,a)-1)},t.prototype.paymentForBalance=function(t){var a;return a=this.interest/12*t,{interestPmt:a,principalPmt:this.monthlyPayment-a,balance:t-(this.monthlyPayment-this.interest/12*t)}},t.$=function(t){return accounting.formatMoney(Math.round(100*t)/100)},t.emptyRow=function(){return{year:"undefined",interestPmt:0,principalPmt:0,balance:0}},t.prototype.buildTable=function(){var a,n,e,r,i,o,m,s;for(e="",n=this.startDate,r=12*this.years,a=this.loanAmount,m=t.emptyRow(),m.year=this.startDate.format("YYYY"),i=s=0;r>=0?r>s:s>r;i=r>=0?++s:--s)o=this.paymentForBalance(a),e+="<tr>",e+="<td>"+n.format("MMM YYYY")+"</td>",e+="<td>"+t.$(o.interestPmt)+"</td>",e+="<td>"+t.$(o.principalPmt)+"</td>",e+="<td>"+t.$(o.balance)+"</td>",e+="</tr>",m.interestPmt+=o.interestPmt,m.principalPmt+=o.principalPmt,m.balance+=o.balance,n=n.add(1,"months"),n.format("YYYY")!==m.year&&(e+='<tr class="year-summary">',e+="<th>"+m.year+"</th>",e+="<th>"+t.$(m.interestPmt)+"</th>",e+="<th>"+t.$(m.principalPmt)+"</th>",e+="<th>"+t.$(o.balance)+"</th>",e+="</tr>"),m=t.emptyRow(),m.year=n.format("YYYY"),a=o.balance;return e},t}();
//# sourceMappingURL=./amortizer.js.map