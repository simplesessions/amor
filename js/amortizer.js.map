{"version":3,"file":"amortizer.js","sources":["amortizer.coffee"],"names":["Amortizer","AmortizerRenderer","years","loanAmount","interest","startDate","this","extraPrincipalPayments","update","loadPaymentsFrom","url","request","XMLHttpRequest","open","onload","_this","status","parseJSONPaymentData","JSON","parse","responseText","console","log","onerror","send","payments","i","len","payment","results","length","payExtra","year","month","amount","stateDate","moment","numPayments","monthlyPayment","calculateMonthlyPayment","totalPayment","totalInterest","date","amt","format","parseFloat","push","monthlyInterest","Math","pow","paymentForBalance","currentBalance","balance","interestPmt","principalPmt","$","val","accounting","formatMoney","round","emptyRow","buildTable","html","j","months","numMonth","ref","ref1","row","yearTotals","buildStandardRow","buildExtraPaymentRow","add","buildYearSummaryRow"],"mappings":"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"}